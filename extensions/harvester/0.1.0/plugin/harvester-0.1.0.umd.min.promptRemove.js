"use strict";(("undefined"!==typeof self?self:this)["webpackChunkharvester_0_1_0"]=("undefined"!==typeof self?self:this)["webpackChunkharvester_0_1_0"]||[]).push([[973],{90421:function(e,t,r){r.r(t),r.d(t,{default:function(){return g}});var l=r(9274);const o={class:"mt-10"},c={class:"mt-10"},a={key:0},n={class:"checkbox-container mr-15"},s=["label","value"],i=(0,l.createElementVNode)("span",{class:"checkbox-custom mr-5",role:"checkbox"},null,-1),m={key:1},h={class:"checkbox-container mr-15"},p=(0,l.createElementVNode)("span",{class:"checkbox-custom mr-5",role:"checkbox"},null,-1);function u(e,t,r,u,d,v){const k=(0,l.resolveDirective)("clean-html");return(0,l.openBlock)(),(0,l.createElementBlock)("div",o,[(0,l.createTextVNode)((0,l.toDisplayString)(e.t("promptRemove.attemptingToRemove",{type:r.type}))+" ",1),(0,l.withDirectives)((0,l.createElementVNode)("span",null,null,512),[[k,v.resourceNames(r.names,v.plusMore,e.t)]]),(0,l.createElementVNode)("div",c,(0,l.toDisplayString)(e.t("harvester.virtualMachine.promptRemove.title")),1),1===r.value.length?((0,l.openBlock)(),(0,l.createElementBlock)("div",a,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(v.removeNameArr[r.value[0].id],((e,r)=>((0,l.openBlock)(),(0,l.createElementBlock)("span",{key:r},[(0,l.createElementVNode)("label",n,[(0,l.withDirectives)((0,l.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>d.checkedList=e),type:"checkbox",label:e,value:e},null,8,s),[[l.vModelCheckbox,d.checkedList]]),i,(0,l.createTextVNode)(" "+(0,l.toDisplayString)(e),1)])])))),128))])):((0,l.openBlock)(),(0,l.createElementBlock)("div",m,[(0,l.createElementVNode)("label",h,[(0,l.withDirectives)((0,l.createElementVNode)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>d.checkAll=e),type:"checkbox"},null,512),[[l.vModelCheckbox,d.checkAll]]),p,(0,l.createTextVNode)(" "+(0,l.toDisplayString)(e.t("harvester.virtualMachine.promptRemove.deleteAll")),1)])]))])}var d=r(65359),v=r(3384),k=r(52225),f=r.n(k),y=r(41594),N=r(32766),b={name:"HarvesterPromptRemove",props:{value:{type:Array,default:()=>[]},names:{type:Array,default:()=>[]},type:{type:String,required:!0}},data(){return{checkedList:[],checkAll:!0}},computed:{...(0,d.aH)("action-menu",["toRemove"]),...(0,d.L8)({t:"i18n/t"}),removeNameArr(){const e={};return this.value.forEach((t=>{if(t.type!==N.rk.VM)return;const r=t.spec.template.spec?.volumes||[],l=r.filter((e=>e.persistentVolumeClaim)).map((e=>{if(e.persistentVolumeClaim)return e.name}));e[t.id]=l})),e},plusMore(){const e=this.toRemove.length-this.names.length;return this.t("promptRemove.andOthers",{count:e})}},watch:{removeNameArr:{handler(e){if(1===this.value.length){const t=Object.values(e[this.value[0].id]);this.checkedList.unshift(t[0])}},deep:!0,immediate:!0}},methods:{resourceNames:y.Nr,remove(){const e=this.$parent.$parent.$parent;let t;e.doneLocation&&(t={...e.doneLocation}),Promise.all(this.value.map((e=>{if(e.type!==N.rk.VM)return void e.remove();let t="";this.value.length>1?this.checkAll&&this.removeNameArr[e.id].forEach((e=>{t+=`removedDisks=${e}&`})):(this.checkedList.forEach((e=>{t+=`removedDisks=${e}&`})),t.replace(/&$/,""));const r=f()(e.links.self);e.remove({url:`${r.pathname}?${t}propagationPolicy=Foreground`})}))).then((r=>{t&&!(0,v.Im)(t)&&e.currentRouter.push(t),e.close()})).catch((t=>{e.error=t}))}}},V=r(47433);const E=(0,V.A)(b,[["render",u]]);var g=E}}]);
//# sourceMappingURL=harvester-0.1.0.umd.min.promptRemove.js.map