(("undefined"!==typeof self?self:this)["webpackChunkharvester_0_1_0"]=("undefined"!==typeof self?self:this)["webpackChunkharvester_0_1_0"]||[]).push([[489],{54956:function(e,t,a){"use strict";a.d(t,{A:function(){return E}});var r=a(9274);const o={class:"consumption-gauge"},s={key:0},n={class:"numbers"},i={key:0},l={key:1},c={class:"numbers-stats"},d={class:"percentage"},u=(0,r.createElementVNode)("i",null,"/Â ",-1),p={class:"mt-10"};function m(e,t,a,m,g,h){const f=(0,r.resolveComponent)("PercentageBar");return(0,r.openBlock)(),(0,r.createElementBlock)("div",o,[a.resourceName&&!a.usedAsResourceName?((0,r.openBlock)(),(0,r.createElementBlock)("h3",s,(0,r.toDisplayString)(a.resourceName),1)):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",n,[(0,r.renderSlot)(e.$slots,"title",{amountTemplateValues:h.amountTemplateValues,formattedPercentage:h.formattedPercentage},(()=>[a.usedAsResourceName?((0,r.openBlock)(),(0,r.createElementBlock)("h4",i,(0,r.toDisplayString)(a.resourceName),1)):((0,r.openBlock)(),(0,r.createElementBlock)("span",l,(0,r.toDisplayString)(e.t("node.detail.glance.consumptionGauge.used")),1)),(0,r.createElementVNode)("span",c,[(0,r.createTextVNode)((0,r.toDisplayString)(e.t("node.detail.glance.consumptionGauge.amount",h.amountTemplateValues))+" ",1),(0,r.createElementVNode)("span",d,[u,(0,r.createTextVNode)((0,r.toDisplayString)(h.formattedPercentage),1)])])]))]),(0,r.createElementVNode)("div",p,[(0,r.createVNode)(f,{modelValue:h.percentageBarValue,"color-stops":a.colorStops},null,8,["modelValue","color-stops"])])])}const g={class:"percentage-bar"},h={key:0,class:"ml-5 percentage-value"};function f(e,t,a,o,s,n){const i=(0,r.resolveComponent)("Bar");return(0,r.openBlock)(),(0,r.createElementBlock)("span",g,[(0,r.createVNode)(i,{percentage:a.modelValue,"primary-color":n.primaryColor,slices:a.slices},null,8,["percentage","primary-color","slices"]),a.showPercentage?((0,r.openBlock)(),(0,r.createElementBlock)("span",h,(0,r.toDisplayString)(n.formattedPercentage),1)):(0,r.createCommentVNode)("",!0)])}function v(e,t,a,o,s,n){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"bar",style:(0,r.normalizeStyle)(n.barStyle)},[(0,r.createElementVNode)("div",{class:"indicator",style:(0,r.normalizeStyle)(n.indicatorStyle)},null,4),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(n.sliceStyles,((e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t,class:"slice",style:(0,r.normalizeStyle)(e)},null,4)))),128))],4)}var y={props:{percentage:{type:Number,required:!0},primaryColor:{type:String,default:"--primary"},secondaryColor:{type:String,default:"--border"},slices:{type:Array,default:()=>[]}},computed:{indicatorStyle(){return{width:`${this.percentage}%`,backgroundColor:`var(${this.primaryColor})`}},barStyle(){return{backgroundColor:`var(${this.secondaryColor})`}},sliceStyles(){return this.slices.map((e=>({left:`${e}%`,visibility:e<this.percentage?"visible":"hidden"})))}}},b=(a(28867),a(47433));const w=(0,b.A)(y,[["render",v],["__scopeId","data-v-095acb32"]]);var k=w,S=a(41594);const M={LESS:"LESS",MORE:"MORE"};var B={components:{Bar:k},props:{modelValue:{type:Number,required:!0,validator(e){return e>=0}},preferredDirection:{type:String,default:M.LESS},showPercentage:{type:Boolean,default:!1},colorStops:{type:Object,default:null},slices:{type:Array,default:()=>[]}},computed:{primaryColor(){const e=this.preferredDirection===M.LESS;if(this.colorStops){const t=Object.keys(this.colorStops).sort();if(e){let e=t.length-1;while(this.modelValue<t[e])e--;return this.colorStops[t[e]]}{let e=0;while(this.modelValue>t[e])e++;return this.colorStops[t[e]]}}const t=e?80:20,a=e?this.modelValue:t,r=e?t:this.modelValue;return a<=r?"--primary":"--error"},formattedPercentage(){return(0,S.l9)(this.modelValue)}}};a(38524);const V=(0,b.A)(B,[["render",f],["__scopeId","data-v-05a459e4"]]);var N=V,x={components:{PercentageBar:N},props:{resourceName:{type:String,default:""},capacity:{type:Number,required:!0},used:{type:Number,required:!0},units:{type:String,default:""},numberFormatter:{type:Function,default:e=>Number.isInteger(e)?e:e.toFixed(2)},colorStops:{type:Object,default:null},usedAsResourceName:{type:Boolean,defaut:!1}},computed:{displayUnits(){return this.units?` ${this.units}`:""},percentageBarValue(){return this.used&&this.capacity?100*this.used/this.capacity:0},amountTemplateValues(){return{used:this.numberFormatter(this.used||0),total:this.numberFormatter(this.capacity||0),unit:this.displayUnits}},formattedPercentage(){return(0,S.l9)(this.percentageBarValue)}}};a(658);const C=(0,b.A)(x,[["render",m]]);var E=C},48303:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var r=a(9274);const o={key:0},s={key:0};function n(e,t,a,n,i,l){const c=(0,r.resolveComponent)("BadgeState");return l.migrationState?((0,r.openBlock)(),(0,r.createElementBlock)("div",o,[a.showSuccess?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("span",s,"/")),(0,r.createVNode)(c,{label:l.migrationState,color:l.migrationBackground},null,8,["label","color"])])):(0,r.createCommentVNode)("",!0)}var i=a(38487),l=a(32766),c={emits:["state-changed"],components:{BadgeState:i.j},props:{vmResource:{type:Object,required:!0},showSuccess:{type:Boolean,default:!0}},computed:{vmiResource(){const e=this.$store.getters["harvester/all"](l.rk.VMI)||[],t=e.find((e=>e?.metadata?.ownerReferences?.[0]?.uid===this.vmResource?.metadata?.uid));return t},migrationState(){return this.vmiResource?.migrationState?.status||""},migrationBackground(){return this.vmiResource?.migrationStateBackground||""}},watch:{migrationState(e){this.$emit("state-changed",e)}}},d=(a(87879),a(47433));const u=(0,d.A)(c,[["render",n],["__scopeId","data-v-1ebac35c"]]);var p=u},12674:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var r=a(9274);const o=e=>((0,r.pushScopeId)("data-v-6d2c76ac"),e=e(),(0,r.popScopeId)(),e),s={class:"state"},n=o((()=>(0,r.createElementVNode)("i",{class:"icon icon-warning icon-lg text-warning"},null,-1))),i=[n];function l(e,t,a,o,n,l){const c=(0,r.resolveComponent)("HarvesterMigrationState"),d=(0,r.resolveComponent)("VMState"),u=(0,r.resolveComponent)("v-dropdown");return(0,r.openBlock)(),(0,r.createElementBlock)("span",null,[(0,r.withDirectives)((0,r.createVNode)(c,{"vm-resource":a.row,onStateChanged:l.migrationStateChanged},null,8,["vm-resource","onStateChanged"]),[[r.vShow,n.isMigrating]]),(0,r.withDirectives)((0,r.createElementVNode)("div",s,[(0,r.createVNode)(d,{row:a.row},null,8,["row"]),l.warningMessage.length?((0,r.openBlock)(),(0,r.createBlock)(u,{key:0,ref:"popover",trigger:"manual",offset:"16"},{popper:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",{onMouseenter:t[3]||(t[3]=e=>l.showMessage(!0)),onMouseleave:t[4]||(t[4]=e=>l.showMessage(!1))},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.warningMessage,((o,s)=>((0,r.openBlock)(),(0,r.createElementBlock)("p",{key:s},[(0,r.createTextVNode)((0,r.toDisplayString)(s+1)+". ",1),l.canMiss(a.row,o)?((0,r.openBlock)(),(0,r.createElementBlock)("a",{key:0,class:"text-link",role:"button",onClick:t[2]||(t[2]=(...e)=>l.dismiss&&l.dismiss(...e))},(0,r.toDisplayString)(e.t("harvester.upgradePage.dismissMessage")),1)):(0,r.createCommentVNode)("",!0),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(o),1)])))),128))],32)])),default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("span",{class:"tooltip-target",onMouseenter:t[0]||(t[0]=e=>l.showMessage(!0)),onMouseleave:t[1]||(t[1]=e=>l.delayClose())},i,32)])),_:1},512)):(0,r.createCommentVNode)("",!0)],512),[[r.vShow,!n.isMigrating]])])}var c=a(71109),d=a(48303),u={components:{VMState:c.A,HarvesterMigrationState:d["default"]},props:{value:{type:String,default:""},row:{type:Object,required:!0},allNodeNetwork:{type:Array,default:()=>[]},allClusterNetwork:{type:Array,default:()=>[]}},data(){return{isMigrating:!1,timer:null}},beforeDestroy(){this.timer&&clearTimeout(this.timer)},computed:{warningMessage(){const e=[];if("VM error"===this.row?.actualState&&this.row.warningMessage?.message&&e.push(this.row.warningMessage?.message),this.row?.migrationMessage&&e.push(this.row?.migrationMessage.message),this.row.warningMessage?.message)if(this.row.warningMessage?.pod){const t=this.row.warningMessage.pod;t.metadata?.state?.error&&!/pod has unbound immediate PersistentVolumeClaims/.test(t.metadata?.state?.message)&&e.push(t.metadata?.state?.message)}else e.push(this.row.warningMessage?.message);return e}},methods:{migrationStateChanged(e){this.isMigrating="Failed"!==e&&!!e},showMessage(e){this.timer&&clearTimeout(this.timer),this.$refs.popover&&(e?this.$refs.popover.show():this.$refs.popover.hide())},delayClose(){this.timer=setTimeout((()=>{this.showMessage(!1)}),500)},async dismiss(){try{await this.row.doAction("dismissInsufficientResourceQuota")}catch(e){400!==e?._status&&503!==e?._status||this.$store.dispatch("growl/error",{title:this.t("harvester.notification.title.error"),message:e?.errors[0]},{root:!0})}},canMiss(e,t){return e.warningMessage?.message===t&&e.warningMessage?.canDismiss}}},p=(a(96253),a(47433));const m=(0,p.A)(u,[["render",l],["__scopeId","data-v-6d2c76ac"]]);var g=m},14482:function(e,t,a){"use strict";a.r(t);var r=a(36758),o=a.n(r),s=a(40935),n=a.n(s),i=n()(o());i.push([e.id,".consumption-gauge .numbers{display:flex;flex-direction:row;justify-content:space-between}.consumption-gauge .numbers-stats{display:flex;flex-direction:row;align-items:center;gap:10px;align-self:baseline}.consumption-gauge .numbers .percentage{font-weight:700}.consumption-gauge .numbers .percentage i{margin-right:10px}",""]),t["default"]=i},52444:function(e,t,a){"use strict";a.r(t);var r=a(36758),o=a.n(r),s=a(40935),n=a.n(s),i=n()(o());i.push([e.id,".percentage-bar[data-v-05a459e4]{display:flex;flex-direction:row}.percentage-bar .percentage-value[data-v-05a459e4]{word-break:keep-all}",""]),t["default"]=i},48611:function(e,t,a){"use strict";a.r(t);var r=a(36758),o=a.n(r),s=a(40935),n=a.n(s),i=n()(o());i.push([e.id,".bar[data-v-095acb32]{width:100%;height:15px;border-radius:7.5px;overflow:hidden;position:relative}.bar .indicator[data-v-095acb32]{height:100%}.bar .slice[data-v-095acb32]{position:absolute;top:0;bottom:0;width:1px;background-color:var(--body-bg)}",""]),t["default"]=i},1607:function(e,t,a){"use strict";a.r(t);var r=a(36758),o=a.n(r),s=a(40935),n=a.n(s),i=n()(o());i.push([e.id,".badge-state[data-v-1ebac35c]{padding:5px 10px;border:1px solid transparent;border-radius:20px}.badge-state.bg-info[data-v-1ebac35c]{border-color:var(--primary)}.badge-state.bg-error[data-v-1ebac35c]{border-color:var(--error)}.badge-state.bg-warning[data-v-1ebac35c]{border-color:var(--warning)}.badge-state.bg-success[data-v-1ebac35c]{color:var(--success);border-color:var(--success);background:transparent}.sortable-table TD .badge-state[data-v-1ebac35c]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;word-wrap:break-word;display:inline-block;max-width:100%;position:relative;padding:2px 10px 1px 10px;font-size:1em;max-width:200px;font-size:.85em;vertical-align:middle}",""]),t["default"]=i},8253:function(e,t,a){"use strict";a.r(t);var r=a(36758),o=a.n(r),s=a(40935),n=a.n(s),i=n()(o());i.push([e.id,".state[data-v-6d2c76ac]{display:flex;justify-content:space-between}.state .icon-warning[data-v-6d2c76ac]{margin-top:2px}",""]),t["default"]=i},658:function(e,t,a){var r=a(14482);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var o=a(74825).A;o("a4069248",r,!0,{sourceMap:!1,shadowMode:!1})},38524:function(e,t,a){var r=a(52444);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var o=a(74825).A;o("a0216a8e",r,!0,{sourceMap:!1,shadowMode:!1})},28867:function(e,t,a){var r=a(48611);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var o=a(74825).A;o("79df3091",r,!0,{sourceMap:!1,shadowMode:!1})},87879:function(e,t,a){var r=a(1607);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var o=a(74825).A;o("5eb25460",r,!0,{sourceMap:!1,shadowMode:!1})},96253:function(e,t,a){var r=a(8253);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var o=a(74825).A;o("405aa37b",r,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=harvester-0.1.0.umd.min.489.js.map